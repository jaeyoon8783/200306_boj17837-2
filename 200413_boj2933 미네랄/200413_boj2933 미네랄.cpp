#include <iostream>
#include <algorithm>
#include <queue>
#define pii pair<int, int>
using namespace std;
//1925
char map[100][100];
int arr[100];
int dx[4] = { -1,1,0,0 };
int dy[4] = { 0,0,-1,1 };
int x, y;

int bfs(int check[][100], int sx, int sy, int cnt)
{
	int bottom = sx;
	queue<pii> q;
	
	q.push({ sx,sy });
	check[sx][sy] = cnt;

	while (!q.empty())
	{
		pii p = q.front();
		q.pop();

		for (int i = 0; i < 4; i++)
		{
			int nx = p.first + dx[i];
			int ny = p.second + dy[i];

			if (nx < 0 || nx >= x || ny < 0 || ny >= y)
				continue;

			if (check[nx][ny] == 0 && map[nx][ny] == 'x')
			{
				check[nx][ny] = cnt;
				q.push({ nx, ny });
				if (bottom < nx)
					bottom = nx;
			}
		}
	}
	return bottom;

}

void down(int check[][100], int su)
{
	int max = 97886781;

	for (int i = 0; i < y; i++)
	{
		for (int j = x-1; j >= 0 ; j--)
		{
			if (check[j][i] == su)
			{

				break;
			}
		}
	}

	for (int i = 0; i < x; i++)
	{
		for (int j = 0; j < y; j++)
		{
			if (check[i][j] == su)
			{
				who.push_back({ i,j });
				int k = 1;
				while (1)
				{
					if (i + k >= x || map[i+k][j] == 'x')
						break;
					k++;
				}
				k--;
				if (max > k)
					max = k;
			}
		}
	}
	//cout << max << "\n";

	for (int i = 0; i < who.size(); i++)
		map[who[i].first][who[i].second] = '.';

	for (int i = 0; i < who.size(); i++)
		map[who[i].first+max][who[i].second] = 'x';
}



void go(int dir, int pos)
{
	int flag = 0;
	if (dir == 0)
	{
		for (int i = 0; i < y ; i++)
		{
			if (map[pos][i] == 'x')
			{
				map[pos][i] = '.';
				flag = 1;
				break;
			}
		}
	}
	else
	{
		for (int i = y - 1; i >= 0; i--)
		{
			if (map[pos][i] == 'x')
			{
				map[pos][i] = '.';
				flag = 1;
				break;
			}
		}
	}

	if (flag == 0)
		return;

	int check[100][100] = { 0 };
	int temp[10] = { 0 };
	int su = 1;

	for (int i = 0; i < x; i++)
	{
		for (int j = 0; j < y; j++)
		{
			if (map[i][j] == 'x' && check[i][j] == 0)
			{
				int bottom = bfs(check, i, j, su);
				temp[su++] = bottom;
			}

		}
	}

	
	for (int i = 1; i < su; i++)
	{
		if (temp[i] != x - 1)
			down(check, i);
	}

}


int main()
{
	ios::sync_with_stdio(false);
	cin.tie(NULL); cout.tie(NULL);

	cin >> x >> y;

	for (int i = 0; i < x; i++)
	{
		for (int j = 0; j < y; j++)
			cin >> map[i][j];
	}

	int n,m;
	cin >> n;
	for (int i = 0; i < n; i++)
	{
		cin >> m;
		if (i % 2 == 0)
			go(0, x - m);
		else
			go(1, x - m);
	
	}


	for (int i = 0; i < x; i++)
	{
		for (int j = 0; j < y; j++)
			cout << map[i][j];
		cout << "\n";
	}
}


/*
8 8
........
........
...x.xx.
...xxx..
..xxx...
..x.xxx.
..x...x.
.xxx..x.
4
6 6 4 3



100 100
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
x..................................................................................................x
6
100 100 1 1 1 1
*/